<div class="control-area">
   <mat-checkbox #selectAllNoneCheckbox
      (change)="selectOrUnselectVisible($event.checked)"
      matTooltip="select/unselect all visible samples">
   </mat-checkbox>
   <app-samples-listing-options
      [initialOptions]="defaultListingOptions"
      (optionsChanged)="listingOptionsChanged($event)">
   </app-samples-listing-options>
   <div class="selected-count-message">
      {{countSelected()}} selected
      <span *ngIf="hiddenSelectedCount > 0">({{hiddenSelectedCount}} hidden)</span>
   </div>
   <button mat-button (click)="expandOrContractAllSamples()">{{expandedSampleIds.size > 0 ? 'collapse samples' : 'expand samples'}}</button>
</div>

<div class="listing">
   <div class="sample-container" *ngFor="let sampleIx of visibleSampleIxs">
      <mat-checkbox [(ngModel)]="allSamples[sampleIx].selected" (change)="clearSelectAllCheckbox()"></mat-checkbox>
      <app-sample
         [sample]="allSamples[sampleIx].sample"
         [showTestsAndResources]="expandedSampleIds.has(allSamples[sampleIx].sample.id)"
         (toggleTestsAndResources)="setSampleExpanded(allSamples[sampleIx].sample.id, $event)"
         (testClick)="navigateToTest($event)"
         (testStageClick)="navigateToTestStage($event)">
      </app-sample>
   </div>
</div>

