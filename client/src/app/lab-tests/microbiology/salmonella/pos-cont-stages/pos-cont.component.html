<div [formGroup]="form">

   <div class="diffs-vs-vidas-positives-area" *ngIf="stage==='SLANT' && !viewOnly && testUnitNumbersDiffMessage">
      <div class="message"
           [ngClass]="{'warn': testUnitNumbersDiffMessageIsWarning, 'ok': !testUnitNumbersDiffMessageIsWarning}">
         {{testUnitNumbersDiffMessage}}
         <span *ngIf="testUnitNumbersDiff && testUnitNumbersDiff.unrepresentedVidasPositives.length > 0">
            <button class="link" (click)="addUnrepresentedVidasPositivesContinuationTestsFormGroups()">
               Add Vidas positives.
            </button>
         </span>
      </div>
   </div>

   <div *ngIf="formInitialized">

      <div class="test-units-area">
         <app-one-pos-test-unit-cont-tests *ngFor="let testUnitNum of sortedTestUnitNums"
            [stage]="stage"
            [showOtherStageDataAsContext]="showOtherStageDataAsContext"
            [viewOnly]="viewOnly"
            [form]="testUnitsFormGroup.get(testUnitNum.toString())"
            [testUnitNumber]="testUnitNum"
            [showDisposeButton]="!viewOnly"
            [sampleTestUnitsTypeAbrev]="sampleTestUnitsTypeAbrev"
            [appUser]="appUser"
            (disposeRequested)="removeTestUnitNumber(testUnitNum)">
         </app-one-pos-test-unit-cont-tests>
      </div>

      <div class="controls-area">
         <!-- TODO
          salmonellaGaminara: makeSelectiveAgarsTestSuiteFormGroup(posContControlsData.salmonellaGaminara),
          salmonellaDiarizonae: makeSelectiveAgarsTestSuiteFormGroup(posContControlsData.salmonellaDiarizonae),
          salmonellaControlsSatisfactory: new FormControl(posContControlsData.salmonellaControlsSatisfactory),
          pVulgarisApiVitekDetection: new FormControl(posContControlsData.pVulgarisApiVitekDetection),
          pVulgarisControlSatisfactory: new FormControl(posContControlsData.pVulgarisControlSatisfactory),
          pAerugiOxidaseDetection: new FormControl(posContControlsData.pAerugiOxidaseDetection),
          pAerugiControlSatisfactory: new FormControl(posContControlsData.pAerugiControlSatisfactory),
          medium: makeSelectiveAgarsTestSuiteFormGroup(posContControlsData.medium),
         -->
      </div>

   </div>

   <div class="stage-options-bottom-bar">
      <button class="link" type="button" (click)="toggleShowOtherStageDataAsContext()">
         {{showOtherStageDataAsContext ? 'Hide' : 'Show'}} {{stage === 'IDENT' ? 'SLANT' : 'IDENT'}} isolate test data
      </button>
   </div>

</div>
